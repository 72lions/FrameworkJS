var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var FrameworkJS={_models:{},_views:{},_controllers:{},_types:{},extend:function(c,b,a){if(typeof c!=="undefined"){if(typeof c.prototype!=="undefined"){if(typeof b==="function"){c.prototype=new b();if(typeof FrameworkJS._types[a]==="undefined"){FrameworkJS._types[a]=c}else{}return c}else{return null}}else{return null}}else{return null}},retrieve:function(a,b,f){if(f===FrameworkJS.CONTROLLER){var e,a,d,k;var h=-1;e=b||"Generic.Controller";a=a||("_id_"+Math.floor(Math.random()*10000).toString());if(!FrameworkJS._controllers[a]||!FrameworkJS.Utils.isArray(FrameworkJS._controllers[a])){FrameworkJS._controllers[a]=[]}for(var c=FrameworkJS._controllers[a].length-1;
c>=0;c--){if(FrameworkJS._controllers[a][c].id==a){h=c;break}}if(h===-1){if(FrameworkJS._types[e]!==undefined){k={id:a,classType:new FrameworkJS._types[e]()}}else{k={id:a,classType:new FrameworkJS.Controller()}}FrameworkJS._controllers[a].push(k);k.classType.id=a;return k.classType}else{return FrameworkJS._controllers[a][h].classType}}else{if(f===FrameworkJS.VIEW){var j,a,e;var h=-1;e=b||"Generic.View";a=a||("_id_"+Math.floor(Math.random()*10000).toString());if(!FrameworkJS._views[e]||!FrameworkJS.Utils.isArray(FrameworkJS._views[e])){FrameworkJS._views[e]=[]}for(var c=FrameworkJS._views[e].length-1;c>=0;c--){if(FrameworkJS._views[e][c].id==a){h=c}}if(h===-1){h=null;if(FrameworkJS._types[e]!==undefined){j={id:a,classType:new FrameworkJS._types[e]()}}else{j={id:a,classType:new FrameworkJS.View()}}FrameworkJS._views[e].push(j);j.classType.id=a;return j.classType}else{return FrameworkJS._views[e][h].classType}}else{if(f===FrameworkJS.MODEL){var h=-1,g,e;e=b||"Generic.Model";a=a||("_id_"+Math.floor(Math.random()*10000).toString());if(!FrameworkJS._models[e]||!FrameworkJS.Utils.isArray(FrameworkJS._models[e])){FrameworkJS._models[e]=[]}for(var c=FrameworkJS._models[e].length-1;c>=0;c--){if(FrameworkJS._models[e][c].id==a){h=c}}if(h===-1){h=null;if(FrameworkJS._types[e]!==undefined){g={id:a,classType:new FrameworkJS._types[e]()}}else{g={id:a,classType:new FrameworkJS.Model()}}FrameworkJS._models[e].push(g);g.classType.id=a;return g.classType}else{return FrameworkJS._models[e][h].classType}}else{return null}}}},CONTROLLER:"controller",VIEW:"view",MODEL:"model"};FrameworkJS.Publisher=function(b){var a={};this.subscribe=function(d,c){if(typeof d!=="undefined"&&typeof c!=="undefined"){if(typeof a[d]==="undefined"){a[d]=[]}if(a[d].indexOf(c)===-1){a[d].push(c)}}else{}};this.unsubscribe=function(e,d){var c;if(typeof e!=="undefined"&&typeof d!=="undefined"){if(typeof a[e]!=="undefined"){c=a[e].indexOf(d);if(c!==-1){a[e].splice(c,1)}}else{}}else{}};this.notify=function(e,c){var f;if(typeof e!=="undefined"){f=a[e];if(typeof f!=="undefined"){for(var d=0;d<f.length;d++){if(typeof f[d].onNotify!=="undefined"){f[d].onNotify.call(f[d],{message:e,params:c||{}})}}}else{}}else{}};return this}(window);FrameworkJS.Ajax=function(a){this.POST="POST";this.GET="GET";this.JSON="json";this.XML="xml";this.TEXT="text";var b={};b.method=a.method||this.GET;b.dataType=a.dataType||this.TEXT;b.url=a.url||undefined;b.data=a.data||"";b.async=a.async||true;b.success=a.success||undefined;b.error=a.error||undefined;var c=function(){var g;var f=b.url;var h="";var d;if(window.XMLHttpRequest){g=new XMLHttpRequest()}else{g=new ActiveXObject("Microsoft.XMLHTTP")}if(b.method===this.POST){h=b.data}else{f+=(b.data!==""?"?"+b.data:"")}try{g.open(b.method,f,b.async);g.send(h)}catch(e){if(typeof b.error!=="undefined"){b.error(e)}}g.onreadystatechange=function(){var i;if(g.readyState==4&&g.status==200){if(typeof b.success!=="undefined"){if(b.dataType==="xml"){d=g.responseXML}if(b.dataType==="json"){d=JSON.parse(g.responseText)}if(b.dataType==="text"){d=g.responseText}b.success(d,g)}}else{if(g.status==404){if(typeof b.error!=="undefined"){b.error(g)}}}}};c()};FrameworkJS.Utils={isArray:function(a){var b=typeof a;if(b==="object"){if(a){if(a instanceof Array){b=true}else{b=false}}else{b=false}}else{b=false}return b}};FrameworkJS.EventTarget=function(){var a={};this.addEventListener=function(c,d,b){var e={callback:d,context:b};if(a[c]===undefined){a[c]=[]}if(a[c].indexOf(e)===-1){a[c].push(e)}};this.dispatchEvent=function(d){var c=a[d.type];if(typeof c!=="undefined"){for(var b=0;b<c.length;b++){c[b].callback.call(c[b].context,d)}}};this.removeEventListener=function(f,g,b){var c;var e=a[f];if(typeof e!=="undefined"){for(var d=0;d<e.length;d++){if(e[d].callback===g&&e[d].context===b){c=d;break}}if(c!==-1){a[f].splice(c,1)}}}};FrameworkJS.Controller=function(){FrameworkJS.EventTarget.call(this);this._view=undefined;this._model=undefined;this.id="";this.name="";this.initialize=function(a){if(typeof a!=="undefined"){this.id=a.id||""
}this.postInitialize()};this.postInitialize=function(){};this.setView=function(a){this._view=a;this._view.setController(this)};this.getView=function(){return this._view};this.getModel=function(){return this._model};this.setModel=function(a){this._model=a};this.onNotify=function(a){};this.subscribe=function(a){FrameworkJS.Publisher.subscribe(a,this)};this.unsubscribe=function(a){FrameworkJS.Publisher.unsubscribe(a,this)}};FrameworkJS.View=function(){FrameworkJS.EventTarget.call(this);this.name="";this.id="";this.title="";this._controller=undefined;this.domElement=null;this.show=function(){};this.hide=function(){};this.setName=function(a){this.name=a};this.setId=function(a){this.id=a};this.getModel=function(){if(this._controller){return this._controller.getModel()}return undefined};this.setController=function(a){this._controller=a};this.getController=function(){return this._controller};this.getDOMElement=function(){return this.domElement};this.initialize=function(a){if(typeof a!=="undefined"){this.setId(a.id)}}};FrameworkJS.Model=function(){this.data={};this.name="";this.id="";this.set=function(a,b){this.data[a]=b};this.get=function(a){return this.data[a]}};